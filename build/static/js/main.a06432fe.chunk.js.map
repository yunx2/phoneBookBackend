{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","components/App.js","index.js"],"names":["Filter","handleFilter","onChange","PersonForm","handleName","handleNumber","add","type","onClick","Persons","persons","Notification","styling","message","includes","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","baseUrl","axios","get","then","response","data","newPerson","post","id","delete","newEntry","put","updated","App","useState","setPersons","setMessage","newName","setNewName","newNumber","setNewNumber","searchTerm","setSearchTerm","filteredResults","setFilteredResults","useEffect","personsServices","phonebook","handleDelete","person","window","confirm","name","filter","p","setTimeout","map","key","number","value","result","e","term","target","toLowerCase","console","log","results","val","preventDefault","filtered","length","created","concat","duplicate","updatedPersons","catch","err","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a06432fe.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({handleFilter}) => {\n  return (\n    <div> filter shown with\n      <input onChange={handleFilter}/>\n    </div>)\n}\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({handleName, handleNumber, add}) => {\n  return (\n    <form>\n      <div>\n        name: <input onChange={handleName} />\n      </div>\n      <div>number: <input onChange={handleNumber}/></div>\n      <div>\n        <button type=\"submit\" onClick={add}>add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({persons}) => {\n  return persons;\n}\n\nexport default Persons;","import React from 'react';\n\nconst Notification = ({message}) => {\n  let styling;\n  if (message.includes('ERROR')) {\n    styling = {\n      color: 'red',\n      background: 'lightgrey',\n      fontSize: 20,\n      borderStyle: 'solid',\n      borderRadius: 5,\n      padding: 10,\n      marginBottom: 10\n    };\n  } else {\n    styling =  styling = {\n      color: 'green',\n      background: 'lightgrey',\n      fontSize: 20,\n      borderStyle: 'solid',\n      borderRadius: 5,\n      padding: 10,\n      marginBottom: 10\n    };\n  }\n\n  if (message === '') {\n    return null;\n  } else {\n    return (\n      <div style={styling}>\n        {message}\n      </div>\n      );\n  }\n};\n \nexport default Notification;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then(response => response.data);\n};\n\nconst deleteEntry = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, newEntry) => {\n  const request = axios.put(`${baseUrl}/${id}`, newEntry);\n  return request.then(updated => updated.data);\n}\n  \nexport default {getAll, create, deleteEntry, update};","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport Notification from './Notification';\nimport personsServices from '../services/persons';\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]);\n  const [message, setMessage] = useState('');\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filteredResults, setFilteredResults] = useState([]);\n\n  const hook = () => {\n    personsServices.getAll()\n      .then(data => {\n        setPersons(data);\n      });\n  };\n\n  useEffect(hook, []);\n\n  const handleChangeName = e => {\n    // get value from events object\n    // use set newName to change state newName to value\n    const val = e.target.value;\n    setNewName(val);\n  };\n\n  const handleChangeNumber = e => {\n    const val = e.target.value;\n    setNewNumber(val);\n  }\n  \n  const handleChangeFilter = e => { \n    const term = e.target.value.toLowerCase();\n    console.log(term);\n    setSearchTerm(term);\n    const results = persons.filter(person => {\n      let name = person.name.toLowerCase();\n      // let number = person.number; // number should already be a string\n      return name.includes(term);\n    });\n    setFilteredResults(results);\n  }\n\n  const handleDelete = person => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsServices.deleteEntry(person.id)\n      .then(() => {\n        const updated = persons.filter(p => p.name !== person.name);\n        setPersons(updated);\n        setMessage(`${person.name} successfully deleted`);\n        setTimeout(() => {\n          setMessage('');\n        }, 5000);\n      });\n    }\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault(); // default behavior of button type=submit is to reload page\n    const filtered = persons.filter(p => p.name === newName); // check for duplicate entries\n    if (filtered.length === 0) {\n      const newPerson = {name: newName, number: newNumber};\n      personsServices.create(newPerson)\n        .then(created => {\n          const updated = persons.concat(created);\n          setPersons(updated); \n          setMessage(`added ${created.name}`);\n          setTimeout(() => {\n            setMessage('');\n          }, 5000);\n        }); \n    } else {\n      const duplicate = filtered[0];\n      if (window.confirm(`${duplicate.name} is already added to phonebook, replace old number with a new one?`)) {\n        const newEntry = {...duplicate, number: newNumber};\n  \n        personsServices.update(duplicate.id, newEntry)\n          .then(updated => {\n            console.log('modified entry:', updated);\n            const updatedPersons = persons.map(person => {\n              if (person.id !== updated.id) { // if \n                return person;\n              } else {\n                return updated;\n              }\n            });\n            setPersons(updatedPersons);\n            setMessage(`changed phone number for ${updated.name}`);\n            setTimeout(() => {\n              setMessage('');\n            }, 5000);\n          })\n          .catch(err => {\n            console.log(err);\n            setMessage(`ERROR: ${newEntry.name} has already been deleted from the server`)\n          });   \n      }\n      setNewName(''); // clears newName after persons is updated, so clicking add again will not add the same name again\n    } \n  }\n\n  let phonebook;\n  if (searchTerm === '') { \n    phonebook = persons.map(person => {\n      return (\n        <p key={person.name}>\n          {person.name} {person.number}\n          <input type=\"button\" value=\"delete\" onClick={() => handleDelete(person)}/>\n        </p>);\n    });\n  } else {\n    phonebook = filteredResults.map(result => {\n      return (\n        <p key={result.name}>\n          {result.name} {result.number}\n          <input type=\"button\" value=\"delete\" onClick={() => handleDelete(result.id)}/> \n        </p>);\n  });\n}\n\n  return (\n    <div>\n      {/* <div> debug: \n      persons: {JSON.stringify(persons)} <br />\n      filtered: {JSON.stringify(filteredResults)} <br />\n      </div> */}\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter handleFilter={handleChangeFilter}/>\n      <h2>add new</h2>\n      <PersonForm handleName={handleChangeName} handleNumber={handleChangeNumber} add={addPerson} />\n     \n      <h2>Numbers</h2>\n      <Persons persons={phonebook} />\n    </div>\n  )\n}\n\nexport default App;\n\n//step 5 debugging: \n  // filteredResults.length === 0 is a bad condition for conditonal rendering because the results array is empty is nothing has been entered into the input area and if no results are found....a better condition is input value === '' since that would mean no input at all\n    //the only way to access the value of the filter input box is search term is a state again\n\n// debugging 2.9, step4: // problem:  state filtered is not up to date with the user input (is one letter behind)\n  // examine where setSearchTerm amd setFilteredResults are and identify where re-renders are happening\n    //results: filtering works when search term is removed from being a state; state change is happening after render?\n\n// 2.9 add filter functionality; user input in text box, determines whech person objects in persons array to render\n  // add new state of results after filtering\n  //add new state to keep track of results of filtering\n  // add onChange handler to synchronize user input to state\n  // filter logic\n    // convert searchTerm to lowercase\n    // use array.filter\n      // test: does search term occur as substring in person.name or person.number..use String.includes()\n// filtering happens onChange so filtering logic should be inside handleChangeFilter\n// add condition to determine whether to render persons array or the filtered results...condition: if input for filter is emply...?\n\n//2.8 add ability to add a phone number with name\n// new input element/textbox\n// new piece of state to keep track of number input\n// onChange handler on input tag to synchronize state to input\n// onclick handler to add name and number to persons list\n  // since there's one button for box text boxes add inClick handler to form element?\n\n// 2.7 add data validation: in addPerson use array.includes to check if user input already exists in persons\n\n// get app to render persons state: use array.map() used to render array of names\n\n// add names to list: \n//1. text input will have an onChange handler to set user input to newNamestate \n//2. button element will have an onClick handler that adds the value in newName //into the persons array\n//  - handler wraps newName in an object and then concats it to persons. then handler users setPersons to set concatenated array as state. then clears textbox","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}